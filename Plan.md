# План автоматизированного тестирования сервиса покупки туров
___
## Перечень автоматизируемых сценариев
___
### Исходные данные
**Валидными данными при заполнении полей следует считать:**
- **"Номер карты"**: 16 цифр в формате **** **** **** ****
- **"Месяц"**: число от 01 до 12 (если текущий год вводится в поле "Год", то номер месяца не должен быть раньше текущего)
- **"Год"**: две последние цифры текущего или последующих годов (но не более 5 лет от текущего года)
- **"Владелец"**: Фамилия и Имя на латинице через пробел
- **"СVC/CVV"**: три цифры

**Номера карт, используемых для тестирования:**
- Номер валидной карты : "4444 4444 4444 4441" статус карты "APPROVED"
- Номер не валидной карты: "4444 4444 4444 4442" статус карты "DECLINED"

**Примечание**
- ссылки перехода на станицу покупки тура доступны только при **запущенной SUT**
- открыта страница покупки тура http://localhost:8080/

### UI тесты
___
#### Оплата по карте
1. **Карта со статусом APPROVED, все поля формы покупки валидные**
* Нажать на кнопку "Купить"
* В появившихся полях ввести валидные данные: номер карты 4444 4444 4444 4441
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** форма отправилась успешно, всплывающее сообщение "Успешно. Операция одобрена банком!"
  
2. **Карта со статусом DECLINED, все поля формы покупки валидные**
* Нажать на кнопку "Купить"
* В появившихся полях ввести валидные данные: номер карты 4444 4444 4444 4442
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы выполнена успешно, всплывающее сообщение "Ошибка! Банк отказал в проведении операции!"
  
3. **Поле "Номер карты" пустое, все остальные поля формы покупки валидные**
* Нажать на кнопку "Купить"
* Оставить поле "Номер карты" пустым, все остальные заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Номер карты"

4. **Поле "Номер карты" из 15-ти цифр**
* Нажать на кнопку "Купить"
* Заполнить поле "Номер карты" невалидным граничным номером карты из 15-ти цифр (например, 4444 4444 4444 444), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Номер карты"

5. **Данные карты, которой нет в базе данных**
* Нажать на кнопку "Купить"
* Заполнить поле "Номер карты" валидным номером карты, которой нет в БД банка (например, 1234 5678 1234 5678), остальные поля – валидными данными
* Нажать на кнопку "Продолжить" 
**Ожидаемый результат:** отправка формы возможна, всплывающее сообщение "Ошибка! Банк отказал в проведении операции"

6. **Поле "Месяц" пустое**
* Нажать на кнопку "Купить"
* Оставить поле "Месяц" пустым, все остальные заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "Месяц"

7. **Поле "Месяц" со значением 00**
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" невалидным значением меньше 1 (например: 00), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Месяц"

8. **Поле "Месяц" со значением 13**
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" невалидным значением больше 12 (например: 13), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Месяц"

9. **Поле "Месяц" со значением 3**
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" невалидным значением из одной цифры (например: 3), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Месяц"

10. **Поле "Год" пустое**
* Нажать на кнопку "Купить"
* Поле "Год" оставить пустым, остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение «Поле обязательно для заполнения» под полем "Год"

11. **Поле "Год" со значением 1**
* Нажать на кнопку "Купить"
* Заполнить поле "Год" невалидными данными с неверным форматом года (например: 1), остальные поля - валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Год"

12. **Поле "Год" со значением, предшествующее текущему**
* Нажать на кнопку "Купить"
* Заполнить поле "Год" граничными невалидными данными года, предшествующего текущему (например: 21), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Истек срок действия карты" под полем "Год"

13. **Поле "Год" со значением, превышающим 5 лет от текущего**
* Нажать на кнопку "Купить"
* Заполнить поле "Год" значением, превышающим 5 лет от текущего (например: 28), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Год"

14. **Поле "Владелец" фамилия и имя в верхнем регистре**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" фамилию и имя на латинице в верхнем регистре (например: IZOTOVA YULIA), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"
**Ожидаемый результат:** форма отправилась успешно, всплывающее сообщение "Успешно. Операция одобрена банком!"

15. **Поле "Владелец" данные через дефис**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" фамилию или имя через дефис (например: Петров-Водкин / Анна-Мария), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** форма отправилась успешно, всплывающее сообщение "Успешно. Операция одобрена банком!"

16. **Поле "Владелец" пустое**
* Нажать на кнопку "Купить"
* Поле "Владелец" оставить пустым, остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "Владелец"

17. **Поле "Владелец" фамилия на латинице, имя отсуствует**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" только фамилию на латинице (например: Izotova), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

18. **Поле "Владелец" фамилия и имя на кирилице**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" фамилию и имя на кириллице (например: Изотова Юлия), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"   
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

19. **Поле "Владелец" цифрами**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" цифры, остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

20. **Поле "Владелец" спецсимволами**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" спецсимволы, остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

21. **Поле "CVC/CVV" пустое**
* Нажать на кнопку "Купить"
* Оставить поле "CVC/CVV" пустым, все остальные заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "CVC/CVV"

22. **Поле "CVC/CVV" c одной цифрой**
* Нажать на кнопку "Купить"
* Ввести в поле "CVC/CVV" одну цифру (например: 3), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "CVC/CVV"

23. **Поле "CVC/CVV" c двумя цифрами**
* Нажать на кнопку "Купить"
* Ввести в поле "CVC/CVV" две цифры (например: 33), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "CVC/CVV"

24.  **Отправка пустой формы оплаты**
* Нажать на кнопку "Купить"
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, во всех полях предупреждение "Поле обязательно для заполнения"

**ВСЕ ПРОВОДИМЫЕ ТЕСТЫ ПРОВЕСТИ НА ФУНКЦИОНАЛЕ "ОПЛАТА В КРЕДИТ"**

### API-тесты
___
#### Post запросы

1. Отправка валидных данных действующей карты 4444 4444 4444 4441 (approved) на URL-адрес http://localhost:9999/payment   
**Ожидаемый результат:** ответ сервера: код 200

2. Отправка валидных данных недействующей карты 4444 4444 4444 4442 (declined) на URL-адрес http://localhost:9999/payment  
**Ожидаемый результат:** ответ сервера: код 200

3. Отправка валидных данных действующей карты 4444 4444 4444 4441 (approved) на URL-адрес http://localhost:9999/credit  
**Ожидаемый результат:** ответ сервера: код 200

4. Отправка валидных данных недействующей карты 4444 4444 4444 4442 (declined) на URL-адрес http://localhost:9999/credit  
**Ожидаемый результат:** ответ сервера: код 200
 

## Перечень используемых инструментов с обоснованием выбора
______
* JDK 11   
Язык программирования на котором будет написан проект
* IntelliJ IDEA  
Код автотестов написан на Java, IntelliJ IDEA - инструмент для написания автотестов на java  
* Gradle  
Легче писать код, управлять зависимостями  
* JUnit  
Самый удобный фреймворк, есть все необходимые аннотации  
*Lombok  
Автоматически генерируются конструкторы, код становится "легче"  
* Selenide  
Удобный фреймворк для написания автотестов (проще чем selenium)  
* Docker  
Для БД в нашем проекте  
* Allure  
Для составления отчетов

## Перечень и описание возможных рисков при автоматизации
_____
* если будет изменен интерфейс/добавлены еще какие-то фичи в форме оплаты, то придется переделывать тесты  
* отсутствие спецификации на приложении
* сразу использованы две базы данных, что добавляет сложностей при настройке SUT

## Интервальная оценка с учётом рисков (в часах):  
____
* Настройка SUT: 12 часов  
* Разработка тест-плана: 8 часов  
* Написание авто-тестов и их прогон: 80 часов  
* Написание баг-репортов: 8 часов  
* Написание отчета по результатам автоматизации: 8 часов  
* Настройка CI: 8 часов  
* Устранение замечаний: ?

## План сдачи работ  
____
1. Разработка автотестов: 12 ноября 2022 г.
2. Баг-репорты и отчет по результатам теста: 19 ноября 2022 г.
3. Отчет по результатам автоматизированного тестирования: 21 ноября 2022 г.





